<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="LugaresVisitados.MainPage"
             Title="Lugares visitados">

    <Grid RowDefinitions="Auto,*,Auto" Padding="10">

        <!-- Barra de búsqueda -->
        <SearchBar x:Name="searchBar"
                   Placeholder="Buscar lugar..."
                   TextChanged="SearchBar_TextChanged"
                   Grid.Row="0"/>

        <!-- Lista de lugares -->
        <CollectionView x:Name="lugaresCollectionView"
                        SelectionMode="None"
                        Grid.Row="1">
            <CollectionView.ItemTemplate>
                <DataTemplate>
                    <Frame BorderColor="Gray" CornerRadius="10" Padding="10" Margin="5">
                        <StackLayout>

                            <!-- Imagen simple -->
                            <Image Source="{Binding ImagenUrl}" 
                                   HeightRequest="150"
                                   Aspect="AspectFill"
                                   BackgroundColor="LightGray"/>
                            

                            <Label Text="{Binding Nombre}" FontAttributes="Bold" FontSize="18"/>
                            <Label Text="{Binding Descripcion}" FontSize="14"/>
                            <Label Text="{Binding FechaVisita, StringFormat='Fecha: {0:dd/MM/yyyy}'}" FontSize="12" TextColor="Gray"/>
                            <StackLayout Orientation="Horizontal" HorizontalOptions="Center" Spacing="10">
                                <Button Text="Editar" Clicked="EditarLugar_Clicked" CommandParameter="{Binding .}"/>
                                <Button Text="Eliminar" Clicked="EliminarLugar_Clicked" CommandParameter="{Binding .}"/>
                            </StackLayout>
                        </StackLayout>
                    </Frame>
                </DataTemplate>
            </CollectionView.ItemTemplate>
        </CollectionView>

        <!-- Botón agregar fijo al final -->
        <Button Text="Agregar nuevo lugar"
                BackgroundColor="#2196F3"
                TextColor="White"
                Clicked="AgregarLugar_Clicked"
                Grid.Row="2"/>
    </Grid>

</ContentPage>